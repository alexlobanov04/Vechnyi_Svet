<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Экран трансляции стихов проекта Вечный Свет">
    <meta name="robots" content="noindex, nofollow">
    <meta name="theme-color" content="#000000">
    <title>Экран Трансляции - Вечный Свет</title>
    <link rel="icon" href="icons/logo.svg" type="image/svg+xml">

    <!-- Local Fonts -->
    <link rel="stylesheet" href="css/fonts.css">

    <!-- Styles -->
    <link rel="stylesheet" href="css/display.css?v=15">
    <!-- Scripts -->
    <script src="js/vendor/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'js/vendor/pdf.worker.min.js';
        window.pdfjsLib = pdfjsLib;
    </script>
</head>

<body>
    <div class="background-overlay"></div>

    <div id="display-container" role="region" aria-live="polite" aria-label="Отображение стиха">
        <div id="verse-content" class="verse-text"></div>
        <div id="verse-ref" class="verse-reference"></div>
    </div>

    <div id="idle" class="idle-message"></div>

    <!-- Force purge old Service Worker cache -->
    <script>
        (function () {
            var key = 'sw_purge_display_v15';
            if (!localStorage.getItem(key)) {
                localStorage.setItem(key, '1');
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.getRegistrations().then(function (regs) {
                        regs.forEach(function (r) { r.unregister(); });
                    });
                    caches.keys().then(function (keys) {
                        keys.forEach(function (k) { caches.delete(k); });
                    });
                    setTimeout(function () { location.reload(true); }, 800);
                }
            }
        })();
    </script>

    <!-- Display module -->
    <script type="module" src="js/display.js?v=15"></script>
</body>

</html>